(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{487:(e,t,s)=>{Promise.resolve().then(s.bind(s,6895))},1154:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6895:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(5155),a=s(2115),l=s(5695),o=s(7168),n=s(9852),i=s(9474),c=s(6220),d=s(7667),u=s(4092),m=s(6671),h=s(6262),x=s.n(h),g=s(6874),p=s.n(g),j=s(1154),v=s(7550);function f(e){let{params:t}=e,s=(0,a.use)(t).slug,h=(0,l.useRouter)(),{isAuthenticated:g}=function(){let[e,t]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{localStorage.setItem("blog_auth_token","temporary-auth-token"),t(!0)},[]),{isAuthenticated:e,login:async e=>{try{return localStorage.setItem("blog_auth_token","temporary-auth-token"),t(!0),!0}catch(e){return console.error("Login error:",e),!1}},logout:()=>{localStorage.removeItem("blog_auth_token")}}}(),{data:f,isLoading:N,error:b}=(0,u.e7)(s),y=(0,u.NR)(),[k,C]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[E,_]=(0,a.useState)(""),[F,I]=(0,a.useState)(""),[A,J]=(0,a.useState)(""),[P,R]=(0,a.useState)(!1),[U,B]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(f){var e;C(f.title),S(f.content),_(f.excerpt||""),I(f.coverImage||""),J((null===(e=f.categories)||void 0===e?void 0:e.map(e=>e.name).join(", "))||""),R(f.published),B(f.featured)}},[f]);let T=async e=>{if(e.preventDefault(),!k||!w){m.oR.error("Title and content are required");return}try{console.log("Submitting blog post update...");let e=k!==(null==f?void 0:f.title)?x()(k,{lower:!0,strict:!0}):(null==f?void 0:f.slug)||s,t=A.split(",").map(e=>e.trim()).filter(Boolean).map(e=>x()(e,{lower:!0,strict:!0}));console.log("Update data:",{slug:s,title:k,newSlug:e,excerpt:E,published:P,featured:U,categories:t}),await y.mutateAsync({slug:s,post:{id:null==f?void 0:f.id,title:k,slug:e,content:w,excerpt:E||k,coverImage:F||void 0,published:P,featured:U,categories:t}}),m.oR.success("Blog post updated successfully"),h.push("/blog/admin")}catch(e){console.error("Error updating blog post:",e),m.oR.error("Failed to update blog post: ".concat(e instanceof Error?e.message:"Unknown error"))}};return N?(0,r.jsx)("div",{className:"container py-12 flex items-center justify-center",children:(0,r.jsx)(j.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):b||!f?(0,r.jsx)("div",{className:"container py-12",children:(0,r.jsxs)("div",{className:"rounded-lg border border-destructive p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-destructive",children:"Post not found"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"The post you are trying to edit does not exist or could not be loaded."}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-2",children:["Slug: ",s]}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-2",children:["Error: ",b instanceof Error?b.message:"Unknown error"]}),(0,r.jsx)(o.$,{className:"mt-4",variant:"outline",asChild:!0,children:(0,r.jsx)(p(),{href:"/blog/admin",children:"Back to Admin"})})]})}):(0,r.jsxs)("div",{className:"container py-12",children:[(0,r.jsx)("div",{className:"mb-8 flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.$,{variant:"ghost",size:"sm",className:"mb-2 flex items-center text-muted-foreground",asChild:!0,children:(0,r.jsxs)(p(),{href:"/blog/admin",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Back to Admin"]})}),(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Post"})]})}),(0,r.jsxs)("form",{onSubmit:T,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"title",children:"Title"}),(0,r.jsx)(n.p,{id:"title",value:k,onChange:e=>C(e.target.value),placeholder:"Enter post title",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"excerpt",children:"Excerpt"}),(0,r.jsx)(i.T,{id:"excerpt",value:E,onChange:e=>_(e.target.value),placeholder:"Brief description of the post",rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"coverImage",children:"Cover Image URL"}),(0,r.jsx)(n.p,{id:"coverImage",value:F,onChange:e=>I(e.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"categories",children:"Categories"}),(0,r.jsx)(n.p,{id:"categories",value:A,onChange:e=>J(e.target.value),placeholder:"technology, programming, web-development"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of categories"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.d,{id:"published",checked:P,onCheckedChange:R}),(0,r.jsx)(c.J,{htmlFor:"published",children:"Published"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.d,{id:"featured",checked:U,onCheckedChange:B}),(0,r.jsx)(c.J,{htmlFor:"featured",children:"Featured"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"content",children:"Content"}),(0,r.jsx)(i.T,{id:"content",value:w,onChange:e=>S(e.target.value),placeholder:"Write your post content in Markdown format including Mermaid diagrams",className:"min-h-[400px]",required:!0})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>h.push("/blog/admin"),children:"Cancel"}),(0,r.jsx)(o.$,{type:"submit",disabled:y.isPending||!k||!w,children:y.isPending?"Updating...":"Update Post"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[429,967,671,373,875,121,441,684,358],()=>t(487)),_N_E=e.O()}]);