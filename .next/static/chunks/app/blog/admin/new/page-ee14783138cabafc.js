(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{6275:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(5155),r=s(2115),l=s(5695),i=s(7168),n=s(9852),c=s(6220),o=s(9474),d=s(7667),h=s(4092),u=s(6671),m=s(6262),x=s.n(m),g=s(6874),p=s.n(g),v=s(7550),j=s(8749);function f(){let e=(0,l.useRouter)(),t=(0,h.si)(),{isAuthenticated:s}=(0,j.As)(),[m,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[C,N]=(0,r.useState)(""),[y,_]=(0,r.useState)(""),[k,w]=(0,r.useState)(""),[S,E]=(0,r.useState)(!1),[F,A]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{s||e.push("/blog/admin/login")},[s,e]),!s)return null;let I=async s=>{if(s.preventDefault(),!m||!f){u.oR.error("Title and content are required");return}try{let s=x()(m,{lower:!0,strict:!0}),a=k.split(",").map(e=>e.trim()).filter(Boolean),r=Math.max(1,Math.ceil(f.split(/\s+/).length/200));await t.mutateAsync({title:m,slug:s,content:f,excerpt:C||m,coverImage:y||null,published:S,featured:F,readingTime:r,categories:a}),u.oR.success("Blog post created successfully"),e.push("/blog/admin")}catch(e){u.oR.error("Failed to create blog post"),console.error("Error creating blog post:",e)}};return(0,a.jsxs)("div",{className:"container py-12",children:[(0,a.jsx)("div",{className:"mb-8 flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"mb-2 flex items-center text-muted-foreground",asChild:!0,children:(0,a.jsxs)(p(),{href:"/blog/admin",children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Back to Admin"]})}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Create New Post"})]})}),(0,a.jsxs)("form",{onSubmit:I,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(n.p,{id:"title",value:m,onChange:e=>g(e.target.value),placeholder:"Enter post title",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"excerpt",children:"Excerpt"}),(0,a.jsx)(o.T,{id:"excerpt",value:C,onChange:e=>N(e.target.value),placeholder:"Brief description of the post",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"coverImage",children:"Cover Image URL"}),(0,a.jsx)(n.p,{id:"coverImage",value:y,onChange:e=>_(e.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"categories",children:"Categories"}),(0,a.jsx)(n.p,{id:"categories",value:k,onChange:e=>w(e.target.value),placeholder:"technology, programming, web-development"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of categories"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.d,{id:"published",checked:S,onCheckedChange:E}),(0,a.jsx)(c.J,{htmlFor:"published",children:"Published"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.d,{id:"featured",checked:F,onCheckedChange:A}),(0,a.jsx)(c.J,{htmlFor:"featured",children:"Featured"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{htmlFor:"content",children:"Content (Markdown)"}),(0,a.jsx)(o.T,{id:"content",value:f,onChange:e=>b(e.target.value),placeholder:"Write your post content in Markdown",className:"min-h-[400px]",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>e.push("/blog/admin"),children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:t.isPending||!m||!f,children:t.isPending?"Creating...":"Create Post"})]})]})]})}},6917:(e,t,s)=>{Promise.resolve().then(s.bind(s,6275))},8749:(e,t,s)=>{"use strict";s.d(t,{As:()=>c,OJ:()=>n});var a=s(5155),r=s(2115),l=s(9971);let i=(0,r.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{"true"===localStorage.getItem("blog_admin_auth")&&n(!0)},[]),(0,a.jsx)(i.Provider,{value:{isAuthenticated:s,login:(e,t)=>"yashs3324@gmail.com"===e&&"Ironman@123#"===t&&(n(!0),localStorage.setItem("blog_admin_auth","true"),(0,l.setCookie)("blog_admin_auth","true",{maxAge:604800,path:"/",sameSite:"strict",secure:!0}),!0),logout:()=>{n(!1),localStorage.removeItem("blog_admin_auth"),(0,l.deleteCookie)("blog_admin_auth",{path:"/"})}},children:t})}function c(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[429,967,671,373,971,875,121,441,684,358],()=>t(6917)),_N_E=e.O()}]);