(()=>{var e={};e.id=650,e.ids=[650],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11211:(e,t,r)=>{Promise.resolve().then(r.bind(r,52963))},15616:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var s=r(60687),o=r(43210),n=r(96241);let i=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Textarea"},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36179:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(60687);r(43210);var o=r(46777),n=r(41778);function i({children:e}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{}),e,(0,s.jsx)(n.A,{})]})}var a=r(71793);function l({children:e}){return(0,s.jsx)(a.OJ,{children:(0,s.jsx)(i,{children:e})})}},36369:(e,t,r)=>{"use strict";r.d(t,{e7:()=>m,BL:()=>f,si:()=>g,FA:()=>b,oR:()=>v,NR:()=>x});var s=r(29494),o=r(8693),n=r(54050);let i="/api/blog";async function a({page:e=1,limit:t=10,category:r,featured:s,admin:o=!1}={}){let n=new URLSearchParams;n.append("page",e.toString()),n.append("limit",t.toString()),r&&n.append("category",r),s&&n.append("featured","true"),o&&n.append("admin","true");let l=await fetch(`${i}?${n.toString()}`);if(!l.ok)throw Error("Failed to fetch blog posts");return l.json()}async function l(e){let t=await fetch(`${i}/${e}`);if(!t.ok){if(404===t.status)throw Error("Blog post not found");throw Error("Failed to fetch blog post")}return t.json()}async function d(e){let t=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create blog post");return t.json()}async function c(e,t){let r=await fetch(`${i}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){if(404===r.status)throw Error("Blog post not found");throw Error("Failed to update blog post")}return r.json()}async function u(e){let t=await fetch(`${i}/${e}`,{method:"DELETE"});if(!t.ok){if(404===t.status)throw Error("Blog post not found");throw Error("Failed to delete blog post")}return t.json()}async function p(e){return c(e.slug,{...e,featured:!e.featured})}let h={all:["blogs"],lists:()=>[...h.all,"list"],list:e=>[...h.lists(),{...e}],details:()=>[...h.all,"detail"],detail:e=>[...h.details(),e]};function f(e={}){return(0,s.I)({queryKey:h.list(e),queryFn:()=>a(e)})}function m(e){return(0,s.I)({queryKey:h.detail(e),queryFn:()=>l(e),enabled:!!e})}function g(){let e=(0,o.jE)();return(0,n.n)({mutationFn:d,onSuccess:t=>{e.invalidateQueries({queryKey:h.lists()}),e.invalidateQueries({queryKey:h.detail(t.slug)})}})}function x(){let e=(0,o.jE)();return(0,n.n)({mutationFn:({slug:e,post:t})=>(console.log(`Mutation triggered for ${e} with data:`,t),c(e,t)),onSuccess:t=>{console.log(`Mutation succeeded, invalidating queries for ${t.slug}`),e.invalidateQueries({queryKey:h.lists()}),e.invalidateQueries({queryKey:h.detail(t.slug)})},onError:e=>{console.error("Update blog post mutation failed:",e)}})}function b(){let e=(0,o.jE)();return(0,n.n)({mutationFn:u,onSuccess:()=>{e.invalidateQueries({queryKey:h.lists()})}})}function v(){let e=(0,o.jE)();return(0,n.n)({mutationFn:e=>p(e),onSuccess:t=>{e.invalidateQueries({queryKey:h.lists()}),e.invalidateQueries({queryKey:h.detail(t.slug)})}})}},39390:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(60687),o=r(43210),n=r(78148),i=r(24224),a=r(96241);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.b,{ref:r,className:(0,a.cn)(l(),e),...t}));d.displayName=n.b.displayName},42902:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var s=r(60687),o=r(43210),n=r(9244),i=r(96241);let a=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:(0,s.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));a.displayName=n.bL.displayName},52963:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/layout.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68988:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(60687),o=r(43210),n=r(96241);let i=o.forwardRef(({className:e,type:t,...r},o)=>(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...r}));i.displayName="Input"},71793:(e,t,r)=>{"use strict";r.d(t,{As:()=>l,OJ:()=>a});var s=r(60687),o=r(43210),n=r(80525);let i=(0,o.createContext)(void 0);function a({children:e}){let[t,r]=(0,o.useState)(!1);return(0,s.jsx)(i.Provider,{value:{isAuthenticated:t,login:(e,t)=>"yashs3324@gmail.com"===e&&"Ironman@123#"===t&&(r(!0),localStorage.setItem("blog_admin_auth","true"),(0,n.setCookie)("blog_admin_auth","true",{maxAge:604800,path:"/",sameSite:"strict",secure:!0}),!0),logout:()=>{r(!1),localStorage.removeItem("blog_admin_auth"),(0,n.deleteCookie)("blog_admin_auth",{path:"/"})}},children:e})}function l(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},84323:(e,t,r)=>{Promise.resolve().then(r.bind(r,91321))},87235:(e,t,r)=>{Promise.resolve().then(r.bind(r,36179))},91321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/new/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/new/page.tsx","default")},93947:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),o=r(48088),n=r(88170),i=r.n(n),a=r(30893),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d={children:["",{children:["blog",{children:["admin",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,91321)),"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/new/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52963)),"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/Users/tanishqsingh/Downloads/portfolio-website/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/new/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/blog/admin/new/page",pathname:"/blog/admin/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},98395:(e,t,r)=>{Promise.resolve().then(r.bind(r,98603))},98603:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(60687),o=r(43210),n=r(16189),i=r(24934),a=r(68988),l=r(39390),d=r(15616),c=r(42902),u=r(36369),p=r(52581),h=r(85126),f=r.n(h),m=r(85814),g=r.n(m),x=r(28559),b=r(71793);function v(){let e=(0,n.useRouter)(),t=(0,u.si)(),{isAuthenticated:r}=(0,b.As)(),[h,m]=(0,o.useState)(""),[v,y]=(0,o.useState)(""),[w,j]=(0,o.useState)(""),[k,C]=(0,o.useState)(""),[N,q]=(0,o.useState)(""),[P,E]=(0,o.useState)(!1),[F,S]=(0,o.useState)(!1);if(!r)return null;let _=async r=>{if(r.preventDefault(),!h||!v){p.oR.error("Title and content are required");return}try{let r=f()(h,{lower:!0,strict:!0}),s=N.split(",").map(e=>e.trim()).filter(Boolean),o=Math.max(1,Math.ceil(v.split(/\s+/).length/200));await t.mutateAsync({title:h,slug:r,content:v,excerpt:w||h,coverImage:k||null,published:P,featured:F,readingTime:o,categories:s}),p.oR.success("Blog post created successfully"),e.push("/blog/admin")}catch(e){p.oR.error("Failed to create blog post"),console.error("Error creating blog post:",e)}};return(0,s.jsxs)("div",{className:"container py-12",children:[(0,s.jsx)("div",{className:"mb-8 flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(i.$,{variant:"ghost",size:"sm",className:"mb-2 flex items-center text-muted-foreground",asChild:!0,children:(0,s.jsxs)(g(),{href:"/blog/admin",children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Back to Admin"]})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Create New Post"})]})}),(0,s.jsxs)("form",{onSubmit:_,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{htmlFor:"title",children:"Title"}),(0,s.jsx)(a.p,{id:"title",value:h,onChange:e=>m(e.target.value),placeholder:"Enter post title",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{htmlFor:"excerpt",children:"Excerpt"}),(0,s.jsx)(d.T,{id:"excerpt",value:w,onChange:e=>j(e.target.value),placeholder:"Brief description of the post",rows:3})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{htmlFor:"coverImage",children:"Cover Image URL"}),(0,s.jsx)(a.p,{id:"coverImage",value:k,onChange:e=>C(e.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{htmlFor:"categories",children:"Categories"}),(0,s.jsx)(a.p,{id:"categories",value:N,onChange:e=>q(e.target.value),placeholder:"technology, programming, web-development"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of categories"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.d,{id:"published",checked:P,onCheckedChange:E}),(0,s.jsx)(l.J,{htmlFor:"published",children:"Published"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.d,{id:"featured",checked:F,onCheckedChange:S}),(0,s.jsx)(l.J,{htmlFor:"featured",children:"Featured"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{htmlFor:"content",children:"Content (Markdown)"}),(0,s.jsx)(d.T,{id:"content",value:v,onChange:e=>y(e.target.value),placeholder:"Write your post content in Markdown",className:"min-h-[400px]",required:!0})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>e.push("/blog/admin"),children:"Cancel"}),(0,s.jsx)(i.$,{type:"submit",disabled:t.isPending||!h||!v,children:t.isPending?"Creating...":"Create Post"})]})]})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,871,216,494,866,115,555],()=>r(93947));module.exports=s})();