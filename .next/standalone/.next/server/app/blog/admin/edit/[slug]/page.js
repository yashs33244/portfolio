(()=>{var e={};e.id=256,e.ids=[256],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6569:(e,t,r)=>{Promise.resolve().then(r.bind(r,55163))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11211:(e,t,r)=>{Promise.resolve().then(r.bind(r,52963))},15616:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var s=r(60687),o=r(43210),n=r(96241);let i=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Textarea"},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36179:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(60687);r(43210);var o=r(46777),n=r(41778);function i({children:e}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{}),e,(0,s.jsx)(n.A,{})]})}var a=r(71793);function l({children:e}){return(0,s.jsx)(a.OJ,{children:(0,s.jsx)(i,{children:e})})}},36369:(e,t,r)=>{"use strict";r.d(t,{e7:()=>h,BL:()=>g,si:()=>f,FA:()=>b,oR:()=>v,NR:()=>x});var s=r(29494),o=r(8693),n=r(54050);let i="/api/blog";async function a({page:e=1,limit:t=10,category:r,featured:s,admin:o=!1}={}){let n=new URLSearchParams;n.append("page",e.toString()),n.append("limit",t.toString()),r&&n.append("category",r),s&&n.append("featured","true"),o&&n.append("admin","true");let l=await fetch(`${i}?${n.toString()}`);if(!l.ok)throw Error("Failed to fetch blog posts");return l.json()}async function l(e){let t=await fetch(`${i}/${e}`);if(!t.ok){if(404===t.status)throw Error("Blog post not found");throw Error("Failed to fetch blog post")}return t.json()}async function d(e){let t=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create blog post");return t.json()}async function c(e,t){let r=await fetch(`${i}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){if(404===r.status)throw Error("Blog post not found");throw Error("Failed to update blog post")}return r.json()}async function u(e){let t=await fetch(`${i}/${e}`,{method:"DELETE"});if(!t.ok){if(404===t.status)throw Error("Blog post not found");throw Error("Failed to delete blog post")}return t.json()}async function p(e){return c(e.slug,{...e,featured:!e.featured})}let m={all:["blogs"],lists:()=>[...m.all,"list"],list:e=>[...m.lists(),{...e}],details:()=>[...m.all,"detail"],detail:e=>[...m.details(),e]};function g(e={}){return(0,s.I)({queryKey:m.list(e),queryFn:()=>a(e)})}function h(e){return(0,s.I)({queryKey:m.detail(e),queryFn:()=>l(e),enabled:!!e})}function f(){let e=(0,o.jE)();return(0,n.n)({mutationFn:d,onSuccess:t=>{e.invalidateQueries({queryKey:m.lists()}),e.invalidateQueries({queryKey:m.detail(t.slug)})}})}function x(){let e=(0,o.jE)();return(0,n.n)({mutationFn:({slug:e,post:t})=>(console.log(`Mutation triggered for ${e} with data:`,t),c(e,t)),onSuccess:t=>{console.log(`Mutation succeeded, invalidating queries for ${t.slug}`),e.invalidateQueries({queryKey:m.lists()}),e.invalidateQueries({queryKey:m.detail(t.slug)})},onError:e=>{console.error("Update blog post mutation failed:",e)}})}function b(){let e=(0,o.jE)();return(0,n.n)({mutationFn:u,onSuccess:()=>{e.invalidateQueries({queryKey:m.lists()})}})}function v(){let e=(0,o.jE)();return(0,n.n)({mutationFn:e=>p(e),onSuccess:t=>{e.invalidateQueries({queryKey:m.lists()}),e.invalidateQueries({queryKey:m.detail(t.slug)})}})}},36483:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(60687),o=r(43210),n=r(16189),i=r(24934),a=r(68988),l=r(15616),d=r(39390),c=r(42902),u=r(36369),p=r(52581),m=r(85126),g=r.n(m),h=r(85814),f=r.n(h),x=r(41862),b=r(28559);function v({params:e}){let t=(0,o.use)(e).slug,r=(0,n.useRouter)(),{isAuthenticated:m}=function(){let[e,t]=(0,o.useState)(!0);return{isAuthenticated:e,login:async e=>{try{return localStorage.setItem("blog_auth_token","temporary-auth-token"),t(!0),!0}catch(e){return console.error("Login error:",e),!1}},logout:()=>{localStorage.removeItem("blog_auth_token")}}}(),{data:h,isLoading:v,error:y}=(0,u.e7)(t),j=(0,u.NR)(),[w,N]=(0,o.useState)(""),[k,C]=(0,o.useState)(""),[q,E]=(0,o.useState)(""),[P,S]=(0,o.useState)(""),[_,F]=(0,o.useState)(""),[A,R]=(0,o.useState)(!1),[U,$]=(0,o.useState)(!1),I=async e=>{if(e.preventDefault(),!w||!k){p.oR.error("Title and content are required");return}try{console.log("Submitting blog post update...");let e=w!==h?.title?g()(w,{lower:!0,strict:!0}):h?.slug||t,s=_.split(",").map(e=>e.trim()).filter(Boolean).map(e=>g()(e,{lower:!0,strict:!0}));console.log("Update data:",{slug:t,title:w,newSlug:e,excerpt:q,published:A,featured:U,categories:s}),await j.mutateAsync({slug:t,post:{id:h?.id,title:w,slug:e,content:k,excerpt:q||w,coverImage:P||void 0,published:A,featured:U,categories:s}}),p.oR.success("Blog post updated successfully"),r.push("/blog/admin")}catch(e){console.error("Error updating blog post:",e),p.oR.error(`Failed to update blog post: ${e instanceof Error?e.message:"Unknown error"}`)}};return v?(0,s.jsx)("div",{className:"container py-12 flex items-center justify-center",children:(0,s.jsx)(x.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):y||!h?(0,s.jsx)("div",{className:"container py-12",children:(0,s.jsxs)("div",{className:"rounded-lg border border-destructive p-8 text-center",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-destructive",children:"Post not found"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"The post you are trying to edit does not exist or could not be loaded."}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-2",children:["Slug: ",t]}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-2",children:["Error: ",y instanceof Error?y.message:"Unknown error"]}),(0,s.jsx)(i.$,{className:"mt-4",variant:"outline",asChild:!0,children:(0,s.jsx)(f(),{href:"/blog/admin",children:"Back to Admin"})})]})}):(0,s.jsxs)("div",{className:"container py-12",children:[(0,s.jsx)("div",{className:"mb-8 flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(i.$,{variant:"ghost",size:"sm",className:"mb-2 flex items-center text-muted-foreground",asChild:!0,children:(0,s.jsxs)(f(),{href:"/blog/admin",children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Back to Admin"]})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Post"})]})}),(0,s.jsxs)("form",{onSubmit:I,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"title",children:"Title"}),(0,s.jsx)(a.p,{id:"title",value:w,onChange:e=>N(e.target.value),placeholder:"Enter post title",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"excerpt",children:"Excerpt"}),(0,s.jsx)(l.T,{id:"excerpt",value:q,onChange:e=>E(e.target.value),placeholder:"Brief description of the post",rows:3})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"coverImage",children:"Cover Image URL"}),(0,s.jsx)(a.p,{id:"coverImage",value:P,onChange:e=>S(e.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"categories",children:"Categories"}),(0,s.jsx)(a.p,{id:"categories",value:_,onChange:e=>F(e.target.value),placeholder:"technology, programming, web-development"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of categories"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.d,{id:"published",checked:A,onCheckedChange:R}),(0,s.jsx)(d.J,{htmlFor:"published",children:"Published"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.d,{id:"featured",checked:U,onCheckedChange:$}),(0,s.jsx)(d.J,{htmlFor:"featured",children:"Featured"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"content",children:"Content"}),(0,s.jsx)(l.T,{id:"content",value:k,onChange:e=>C(e.target.value),placeholder:"Write your post content in Markdown format including Mermaid diagrams",className:"min-h-[400px]",required:!0})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>r.push("/blog/admin"),children:"Cancel"}),(0,s.jsx)(i.$,{type:"submit",disabled:j.isPending||!w||!k,children:j.isPending?"Updating...":"Update Post"})]})]})]})}},39390:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(60687),o=r(43210),n=r(78148),i=r(24224),a=r(96241);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.b,{ref:r,className:(0,a.cn)(l(),e),...t}));d.displayName=n.b.displayName},41862:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42902:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var s=r(60687),o=r(43210),n=r(9244),i=r(96241);let a=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:(0,s.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));a.displayName=n.bL.displayName},48425:(e,t,r)=>{Promise.resolve().then(r.bind(r,36483))},52963:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/layout.tsx","default")},55163:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/edit/[slug]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/edit/[slug]/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68988:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(60687),o=r(43210),n=r(96241);let i=o.forwardRef(({className:e,type:t,...r},o)=>(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...r}));i.displayName="Input"},71793:(e,t,r)=>{"use strict";r.d(t,{As:()=>l,OJ:()=>a});var s=r(60687),o=r(43210),n=r(80525);let i=(0,o.createContext)(void 0);function a({children:e}){let[t,r]=(0,o.useState)(!1);return(0,s.jsx)(i.Provider,{value:{isAuthenticated:t,login:(e,t)=>"yashs3324@gmail.com"===e&&"Ironman@123#"===t&&(r(!0),localStorage.setItem("blog_admin_auth","true"),(0,n.setCookie)("blog_admin_auth","true",{maxAge:604800,path:"/",sameSite:"strict",secure:!0}),!0),logout:()=>{r(!1),localStorage.removeItem("blog_admin_auth"),(0,n.deleteCookie)("blog_admin_auth",{path:"/"})}},children:e})}function l(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},87235:(e,t,r)=>{Promise.resolve().then(r.bind(r,36179))},90383:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),o=r(48088),n=r(88170),i=r.n(n),a=r(30893),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d={children:["",{children:["blog",{children:["admin",{children:["edit",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,55163)),"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/edit/[slug]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52963)),"/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/Users/tanishqsingh/Downloads/portfolio-website/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/tanishqsingh/Downloads/portfolio-website/app/blog/admin/edit/[slug]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/blog/admin/edit/[slug]/page",pathname:"/blog/admin/edit/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,871,216,494,866,115,555],()=>r(90383));module.exports=s})();